<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PlayHub ‚Äî Browser Games</title>
  <style>
    body { background:#0b0f17; color:#e6eef6; font:16px system-ui; margin:0; }
    header, main { max-width:900px; margin:auto; padding:16px; }
    h1 { margin:0 0 10px; }
    .grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); gap:16px; }
    .card { background:#121826; border-radius:12px; overflow:hidden; }
    .thumb { aspect-ratio:16/9; background:#0e1320; }
    .thumb img { width:100%; height:100%; object-fit:cover; }
    .body { padding:10px; }
    .title { font-weight:700; margin-bottom:4px; }
    .btn { display:inline-block; padding:8px 12px; margin-top:8px;
           background:#5ac8fa; color:#000; border-radius:8px; cursor:pointer; text-decoration:none; }
    dialog { width:90%; max-width:800px; border:none; border-radius:12px; }
    iframe { width:100%; height:70vh; border:none; }
  </style>
</head>
<body>

<header>
  <h1>üéÆ PlayHub</h1>
  <p>Click a game to play!</p>
</header>

<main>
  <div class="grid" id="grid"></div>
</main>

<dialog id="player">
  <button id="close">Close</button>
  <iframe id="frame"></iframe>
</dialog>

<script>
const grid = document.getElementById('grid');
const player = document.getElementById('player');
const frame = document.getElementById('frame');
const closeBtn = document.getElementById('close');

function card(game){
  const el = document.createElement('div');
  el.className = 'card';
  el.innerHTML = `
    <div class="thumb">
      <img src="${game.path}cover.jpg" onerror="this.style.display='none'">
    </div>
    <div class="body">
      <div class="title">${game.title}</div>
      <a class="btn">Play</a>
    </div>
  `;
  el.querySelector('.btn').onclick = () => openGame(game);
  return el;
}

function openGame(game){
  frame.src = game.path;
  player.showModal();
}

closeBtn.onclick = () => {
  frame.src = 'about:blank';
  player.close();
};

// Load games.json
fetch("games.json")
  .then(res => res.json())
  .then(games => games.forEach(g => grid.appendChild(card(g))))
  .catch(err => {
    grid.innerHTML = "<p>‚ö†Ô∏è Failed to load games.json</p>";
    console.error(err);
  });
</script>

</body>
</html>
